"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[578],{7578:function(e,n,i){i.r(n),i.d(n,{default:function(){return g}});var s=i(4165),a=i(5861),t=i(9439),o=i(1491),d=i(2791),c=i(7689),l=i(3433),r=i(3244),u=i(5279),m=i(184);var v=function(e){var n=e.message;return(0,m.jsxs)("div",{className:"cp-mid-others",children:[(0,m.jsx)("div",{className:"cp-mid-left",children:(0,m.jsx)("div",{className:"cp-mid-img"})}),(0,m.jsxs)("div",{className:"cp-mid-right",children:[(0,m.jsxs)("div",{className:"cp-mid-info",children:[(0,m.jsx)("span",{className:"cp-mid-info-name",children:null===n||void 0===n?void 0:n.sender_name}),(0,m.jsxs)("span",{className:"cp-mid-info-date",children:[null===n||void 0===n?void 0:n.date," - ",null===n||void 0===n?void 0:n.time]})]}),(0,m.jsx)("div",{className:"cp-mid-message cp-mid-message-other",children:null===n||void 0===n?void 0:n.message})]})]})};var h=function(e){var n=e.message;return(0,m.jsxs)("div",{className:"cp-mid-you",children:[(0,m.jsxs)("div",{className:"cp-mid-left",children:[(0,m.jsxs)("div",{className:"cp-mid-info",children:[(0,m.jsxs)("span",{className:"cp-mid-info-date",children:[null===n||void 0===n?void 0:n.date," - ",null===n||void 0===n?void 0:n.time]}),(0,m.jsx)("span",{className:"cp-mid-info-name",children:"You"})]}),(0,m.jsx)("div",{className:"cp-mid-message cp-mid-message-you",children:null===n||void 0===n?void 0:n.message})]}),(0,m.jsx)("div",{className:"cp-mid-right",children:(0,m.jsx)("div",{className:"cp-mid-img"})})]})},p=i(4123),f=i(7788);var x=function(e){var n=e.room,i=e.showMobileChat,s=e.removeChatRoom,a=(0,d.useRef)(),o=(0,d.useState)(""),c=(0,t.Z)(o,2),x=c[0],j=c[1],g=(0,d.useState)([]),N=(0,t.Z)(g,2),b=N[0],w=N[1],y=(0,f.F7)(),_=(0,t.Z)(y,1)[0].userData,D=(0,f.F7)(),S=(0,t.Z)(D,2),Z=(S[0].loading,S[1]),k=function(){var e=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()],i=e.getDate();return"".concat(n," ").concat(i)},C=function(){var e=new Date,n=e.getHours(),i=e.getMinutes(),s=n>=12?"pm":"am";return(n=(n%=12)||12)+":"+(i=i<10?"0"+i:i)+" "+s};return(0,d.useEffect)((function(){a.current=(0,p.ZP)("https://proj-sportflix.onrender.com"),Z({type:"SET_LOADING",loading:!0}),a.current.emit("join-room",null===n||void 0===n?void 0:n.room_id,(function(e){w(e.roomInfo.messages)})),a.current.on("receive-message",(function(e){return w((function(n){return[].concat((0,l.Z)(n),[e])}))})),Z({type:"SET_LOADING",loading:!1}),w([]),j("")}),[n]),(0,m.jsxs)("div",{className:"chatPortal",children:[(0,m.jsxs)("div",{className:"cp-top",children:[i&&(0,m.jsx)("span",{onClick:function(){return s()},children:"Back"}),(0,m.jsx)("div",{className:"cp-top-info",children:(0,m.jsxs)("span",{className:"cp-top-name",children:[null===n||void 0===n?void 0:n.name," Chatroom"]})})]}),(0,m.jsx)("div",{className:"cp-mid",children:null===b||void 0===b?void 0:b.map((function(e){return e.sender_id===(null===_||void 0===_?void 0:_._id)?(0,m.jsx)(h,{message:e}):(0,m.jsx)(v,{message:e})}))}),(0,m.jsx)("div",{className:"cp-btm",children:(0,m.jsxs)("form",{className:"cp-btm-inp-container",onSubmit:function(e){return function(e){var i;e.preventDefault();var s=x.replace(/\s+/g," ").trim();j("");var t={sender:{name:null===_||void 0===_?void 0:_.name,userId:null===_||void 0===_?void 0:_._id},date:k(),time:C(),message:s,room:null===n||void 0===n?void 0:n.room_id};null===(i=a.current)||void 0===i||i.emit("send-message",t),w((function(e){return[].concat((0,l.Z)(e),[{sender_name:null===_||void 0===_?void 0:_.name,sender_id:null===_||void 0===_?void 0:_._id,date:k(),time:C(),message:s}])}))}(e)},children:[(0,m.jsx)("input",{type:"text",className:"cp-btm-inp",placeholder:"Type a message",value:x,onChange:function(e){return function(e){j(e.target.value)}(e)}}),(0,m.jsx)(u.Z,{variant:"contained",className:"cp-btm-inp-btn",sx:{background:"rgb(69, 106, 242)",borderRadius:"0px",borderTopRightRadius:"8px !important",borderBottomRightRadius:"8px !important",padding:"3.5px 10px",boxShadow:"unset"},type:"submit",endIcon:(0,m.jsx)(r.Z,{}),children:"Send"})]})})]})},j=i(3093);var g=function(){var e,n,i,l,r,u,v=(0,c.s0)(),h=(0,d.useState)(),p=(0,t.Z)(h,2),g=p[0],N=p[1],b=(0,f.F7)(),w=(0,t.Z)(b,2),y=w[0],_=y.userData,D=(y.loading,w[1]),S=(0,d.useState)([]),Z=(0,t.Z)(S,2),k=Z[0],C=Z[1],E=(0,d.useState)(null),A=(0,t.Z)(E,2),M=(A[0],A[1],(0,d.useState)(!1)),R=(0,t.Z)(M,2),T=R[0],F=R[1],I=function(e){var n=new Date(e),i=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()],s=n.getDate(),a=n.getFullYear();return"".concat(i," ").concat(s," , ").concat(a)},O=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var n,i,a,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({type:"SET_LOADING",loading:!0}),t=new Date,e.next=4,j.V.get("/events/get-user-rooms").then((function(e){var s,o,d;n=null===(s=e.data.rooms)||void 0===s?void 0:s.filter((function(e){return new Date(e.date)>=t})),i=null===(o=e.data.rooms)||void 0===o?void 0:o.filter((function(e){return new Date(e.date)<t})),a=null===(d=e.data.rooms)||void 0===d?void 0:d.filter((function(e){return(null===e||void 0===e?void 0:e.host_id)===(null===_||void 0===_?void 0:_._id)})),C({upcoming:n,past:i,hosted:a})})).catch((function(e){var n,i;D({type:"SET_RESPONSE_DATA",responseData:{message:(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Something went wrong ... please try again",type:"error"}})}));case 4:D({type:"SET_LOADING",loading:!1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){window.innerWidth<=1e3?F(!0):F(!1)};return(0,d.useEffect)((function(){O()}),[]),(0,d.useEffect)((function(){window.innerWidth<=1e3?F(!0):F(!1),window.addEventListener("resize",J)}),[]),(0,m.jsx)("div",{className:"chat",children:(0,m.jsxs)("div",{className:"chat-container",children:[(0,m.jsx)("div",{className:"chat-left",children:T&&g?(0,m.jsx)(x,{room:g,showMobileChat:T,removeChatRoom:function(){N(null)}}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"chat-header-container",children:[(0,m.jsx)("div",{className:"chat-back-container",onClick:function(){return v(-1)},children:(0,m.jsx)(o.Z,{})}),(0,m.jsx)("span",{children:"Messages"})]}),(0,m.jsx)("div",{className:"chat-left-container",children:(0,m.jsxs)("div",{className:"chat-left-main-container",children:[" ",0!==(null===k||void 0===k||null===(e=k.hosted)||void 0===e?void 0:e.length)&&(0,m.jsx)("span",{className:"chat-event-timeline",children:"Hosted events"}),null===k||void 0===k||null===(n=k.hosted)||void 0===n?void 0:n.map((function(e){return(0,m.jsx)("div",{className:"chat-selector",onClick:function(){return N(e)},children:(0,m.jsxs)("div",{className:"chat-op-info",children:[(0,m.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,m.jsxs)("div",{className:"chat-op-info-btm",children:[(0,m.jsx)("span",{children:I(null===e||void 0===e?void 0:e.date)}),(0,m.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})},null===e||void 0===e?void 0:e._id)})),0!==(null===k||void 0===k||null===(i=k.upcoming)||void 0===i?void 0:i.length)&&(0,m.jsx)("span",{className:"chat-event-timeline",children:"Upcoming events"}),null===k||void 0===k||null===(l=k.upcoming)||void 0===l?void 0:l.map((function(e){return(0,m.jsx)("div",{className:"chat-selector",onClick:function(){return N(e)},children:(0,m.jsxs)("div",{className:"chat-op-info",children:[(0,m.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,m.jsxs)("div",{className:"chat-op-info-btm",children:[(0,m.jsx)("span",{children:I(null===e||void 0===e?void 0:e.date)}),(0,m.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})},null===e||void 0===e?void 0:e._id)})),0!==(null===k||void 0===k||null===(r=k.past)||void 0===r?void 0:r.length)&&(0,m.jsx)("span",{className:"chat-event-timeline",children:"Past events"}),null===k||void 0===k||null===(u=k.past)||void 0===u?void 0:u.map((function(e){return(0,m.jsx)("div",{className:"chat-selector",onClick:function(){return N(e)},children:(0,m.jsxs)("div",{className:"chat-op-info",children:[(0,m.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,m.jsxs)("div",{className:"chat-op-info-btm",children:[(0,m.jsx)("span",{children:I(null===e||void 0===e?void 0:e.date)}),(0,m.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})},null===e||void 0===e?void 0:e._id)}))]})})]})}),!T&&(0,m.jsx)("div",{className:"chat-right",children:g&&(0,m.jsx)(x,{room:g})})]})})}}}]);
//# sourceMappingURL=578.a056d3fe.chunk.js.map