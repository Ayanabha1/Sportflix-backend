"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[578],{7578:function(e,n,i){i.r(n),i.d(n,{default:function(){return g}});var s=i(4165),a=i(5861),t=i(9439),d=i(1491),o=i(2791),c=i(7689),l=i(3433),r=i(3244),u=i(5279),v=i(184);var m=function(e){var n=e.message;return(0,v.jsxs)("div",{className:"cp-mid-others",children:[(0,v.jsx)("div",{className:"cp-mid-left",children:(0,v.jsx)("div",{className:"cp-mid-img"})}),(0,v.jsxs)("div",{className:"cp-mid-right",children:[(0,v.jsxs)("div",{className:"cp-mid-info",children:[(0,v.jsx)("span",{className:"cp-mid-info-name",children:null===n||void 0===n?void 0:n.sender_name}),(0,v.jsxs)("span",{className:"cp-mid-info-date",children:[null===n||void 0===n?void 0:n.date," - ",null===n||void 0===n?void 0:n.time]})]}),(0,v.jsx)("div",{className:"cp-mid-message cp-mid-message-other",children:null===n||void 0===n?void 0:n.message})]})]})};var p=function(e){var n=e.message;return(0,v.jsxs)("div",{className:"cp-mid-you",children:[(0,v.jsxs)("div",{className:"cp-mid-left",children:[(0,v.jsxs)("div",{className:"cp-mid-info",children:[(0,v.jsxs)("span",{className:"cp-mid-info-date",children:[null===n||void 0===n?void 0:n.date," - ",null===n||void 0===n?void 0:n.time]}),(0,v.jsx)("span",{className:"cp-mid-info-name",children:"You"})]}),(0,v.jsx)("div",{className:"cp-mid-message cp-mid-message-you",children:null===n||void 0===n?void 0:n.message})]}),(0,v.jsx)("div",{className:"cp-mid-right",children:(0,v.jsx)("div",{className:"cp-mid-img"})})]})},h=i(4123),x=i(7788);var f=function(e){var n=e.room,i=(0,o.useRef)(),s=(0,o.useState)(""),a=(0,t.Z)(s,2),d=a[0],c=a[1],f=(0,o.useState)([]),j=(0,t.Z)(f,2),g=j[0],N=j[1],b=(0,x.F7)(),y=(0,t.Z)(b,1)[0].userData,_=(0,x.F7)(),D=(0,t.Z)(_,2),S=(D[0].loading,D[1]),Z=function(){var e=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()],i=e.getDate();return"".concat(n," ").concat(i)},w=function(){var e=new Date,n=e.getHours(),i=e.getMinutes(),s=n>=12?"pm":"am";return(n=(n%=12)||12)+":"+(i=i<10?"0"+i:i)+" "+s};return(0,o.useEffect)((function(){i.current=(0,h.ZP)("https://proj-sportflix.onrender.com"),S({type:"SET_LOADING",loading:!0}),i.current.emit("join-room",null===n||void 0===n?void 0:n.room_id,(function(e){N(e.roomInfo.messages)})),i.current.on("receive-message",(function(e){return N((function(n){return[].concat((0,l.Z)(n),[e])}))})),S({type:"SET_LOADING",loading:!1}),N([]),c("")}),[n]),(0,v.jsxs)("div",{className:"chatPortal",children:[(0,v.jsxs)("div",{className:"cp-top",children:[(0,v.jsx)("div",{className:"cp-top-logo"}),(0,v.jsx)("div",{className:"cp-top-info",children:(0,v.jsx)("span",{className:"cp-top-name",children:null===n||void 0===n?void 0:n.name})})]}),(0,v.jsx)("div",{className:"cp-mid",children:null===g||void 0===g?void 0:g.map((function(e){return e.sender_id===(null===y||void 0===y?void 0:y._id)?(0,v.jsx)(p,{message:e}):(0,v.jsx)(m,{message:e})}))}),(0,v.jsx)("div",{className:"cp-btm",children:(0,v.jsxs)("form",{className:"cp-btm-inp-container",onSubmit:function(e){return function(e){var s;e.preventDefault();var a=d.replace(/\s+/g," ").trim();c("");var t={sender:{name:null===y||void 0===y?void 0:y.name,userId:null===y||void 0===y?void 0:y._id},date:Z(),time:w(),message:a,room:null===n||void 0===n?void 0:n.room_id};null===(s=i.current)||void 0===s||s.emit("send-message",t),N((function(e){return[].concat((0,l.Z)(e),[{sender_name:null===y||void 0===y?void 0:y.name,sender_id:null===y||void 0===y?void 0:y._id,date:Z(),time:w(),message:a}])}))}(e)},children:[(0,v.jsx)("input",{type:"text",className:"cp-btm-inp",placeholder:"Type a message",value:d,onChange:function(e){return function(e){c(e.target.value)}(e)}}),(0,v.jsx)(u.Z,{variant:"contained",className:"cp-btm-inp-btn",sx:{background:"rgb(69, 106, 242)",borderRadius:"0px",borderTopRightRadius:"8px !important",borderBottomRightRadius:"8px !important",padding:"3.5px 10px",boxShadow:"unset"},type:"submit",endIcon:(0,v.jsx)(r.Z,{}),children:"Send"})]})})]})},j=i(3093);var g=function(){var e,n,i,l,r,u,m=(0,c.s0)(),p=(0,o.useState)(),h=(0,t.Z)(p,2),g=h[0],N=h[1],b=(0,x.F7)(),y=(0,t.Z)(b,2),_=y[0],D=_.userData,S=(_.loading,y[1]),Z=(0,o.useState)([]),w=(0,t.Z)(Z,2),k=w[0],A=w[1],E=function(e){var n=new Date(e),i=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()],s=n.getDate(),a=n.getFullYear();return"".concat(i," ").concat(s," , ").concat(a)},M=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var n,i,a,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({type:"SET_LOADING",loading:!0}),t=new Date,e.next=4,j.V.get("/events/get-user-rooms").then((function(e){var s,d,o;n=null===(s=e.data.rooms)||void 0===s?void 0:s.filter((function(e){return new Date(e.date)>=t})),i=null===(d=e.data.rooms)||void 0===d?void 0:d.filter((function(e){return new Date(e.date)<t})),a=null===(o=e.data.rooms)||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.host_id)===(null===D||void 0===D?void 0:D._id)})),A({upcoming:n,past:i,hosted:a})})).catch((function(e){var n,i;S({type:"SET_RESPONSE_DATA",responseData:{message:(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Something went wrong ... please try again",type:"error"}})}));case 4:S({type:"SET_LOADING",loading:!1});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){M()}),[]),(0,v.jsx)("div",{className:"chat",children:(0,v.jsxs)("div",{className:"chat-container",children:[(0,v.jsxs)("div",{className:"chat-left",children:[(0,v.jsxs)("div",{className:"chat-header-container",children:[(0,v.jsx)("div",{className:"chat-back-container",onClick:function(){return m(-1)},children:(0,v.jsx)(d.Z,{})}),(0,v.jsx)("span",{children:"Messages"})]}),0!==(null===k||void 0===k||null===(e=k.hosted)||void 0===e?void 0:e.length)&&(0,v.jsx)("span",{className:"chat-event-timeline",children:"Hosted events"}),null===k||void 0===k||null===(n=k.hosted)||void 0===n?void 0:n.map((function(e){return(0,v.jsxs)("div",{className:"chat-selector",onClick:function(){return N(e)},children:[(0,v.jsx)("div",{className:"chat-op-img"}),(0,v.jsxs)("div",{className:"chat-op-info",children:[(0,v.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,v.jsxs)("div",{className:"chat-op-info-btm",children:[(0,v.jsx)("span",{children:E(null===e||void 0===e?void 0:e.date)}),(0,v.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})]},null===e||void 0===e?void 0:e._id)})),0!==(null===k||void 0===k||null===(i=k.upcoming)||void 0===i?void 0:i.length)&&(0,v.jsx)("span",{className:"chat-event-timeline",children:"Upcoming events"}),null===k||void 0===k||null===(l=k.upcoming)||void 0===l?void 0:l.map((function(e){return(0,v.jsxs)("div",{className:"chat-selector",onClick:function(){return N(e)},children:[(0,v.jsx)("div",{className:"chat-op-img"}),(0,v.jsxs)("div",{className:"chat-op-info",children:[(0,v.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,v.jsxs)("div",{className:"chat-op-info-btm",children:[(0,v.jsx)("span",{children:E(null===e||void 0===e?void 0:e.date)}),(0,v.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})]},null===e||void 0===e?void 0:e._id)})),0!==(null===k||void 0===k||null===(r=k.past)||void 0===r?void 0:r.length)&&(0,v.jsx)("span",{className:"chat-event-timeline",children:"Past events"}),null===k||void 0===k||null===(u=k.past)||void 0===u?void 0:u.map((function(e){return(0,v.jsxs)("div",{className:"chat-selector",onClick:function(){return N(e)},children:[(0,v.jsx)("div",{className:"chat-op-img"}),(0,v.jsxs)("div",{className:"chat-op-info",children:[(0,v.jsx)("span",{className:"chat-op-name",children:null===e||void 0===e?void 0:e.name}),(0,v.jsxs)("div",{className:"chat-op-info-btm",children:[(0,v.jsx)("span",{children:E(null===e||void 0===e?void 0:e.date)}),(0,v.jsx)("span",{children:null===e||void 0===e?void 0:e.type})]})]})]},null===e||void 0===e?void 0:e._id)}))]}),(0,v.jsx)("div",{className:"chat-right",children:g&&(0,v.jsx)(f,{room:g})})]})})}}}]);
//# sourceMappingURL=578.2c3c514a.chunk.js.map