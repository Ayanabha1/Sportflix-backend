"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[477],{3477:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var a=t(4165),i=t(5861),r=t(4942),o=t(1413),s=t(9439),d=t(8787),l=t(3608),u=t(5279),c=t(2791),v=t(7689),p=t(3093),f=t(7788),m=t(9961),h=t(7626),y=t(6042),x=(t(8559),t(184));var g=function(e){var n=e.markerLocation,t=(0,c.useState)([0,0]),a=(0,s.Z)(t,2),i=a[0],r=a[1],o=(0,c.useState)(2),d=(0,s.Z)(o,2),l=d[0],u=(d[1],(0,c.useRef)());(0,c.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){e&&r([e.coords.latitude,e.coords.longitude])}))}),[]);var v=function(e){var n;null===(n=u.current)||void 0===n||n.flyTo(e,14,{duration:3})};return(0,c.useEffect)((function(){0!==i[0]&&0!==i[1]&&v(i)}),[i]),(0,c.useEffect)((function(){0!==n[0]&&0!==n[1]&&v(n)}),[n]),(0,x.jsxs)(m.h,{center:i,zoom:l,ref:u,children:[(0,x.jsx)(h.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Map data \xa9 <a href='https://openstreetmap.org'>OpenStreetMap</a> contributors"}),0!==n[0]&&0!==n[1]&&(0,x.jsx)(y.J,{position:n})]})},Z=t(7549),N=t(3263);var j=function(){var e=(0,f.F7)(),n=(0,s.Z)(e,2),t=n[0].userData,m=n[1],h=(0,c.useState)(""),y=(0,s.Z)(h,2),j=y[0],S=y[1],b=(0,c.useState)({}),w=(0,s.Z)(b,2),k=w[0],E=w[1],_=(0,c.useState)([]),D=(0,s.Z)(_,2),A=D[0],C=D[1],T=(0,c.useState)(),P=(0,s.Z)(T,2),O=P[0],I=P[1],L=(0,c.useState)([0,0]),q=(0,s.Z)(L,2),G=q[0],M=q[1],R=(0,v.s0)(),z=(0,v.s0)(),B="pk.a42110b5c004d27c9e2d214f36d0c698",F=new Z.Q4({params:{key:B}}),H=function(e){var n=e.target,t=n.id,a=n.value;E((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},t,a))}))},J=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var i,r,s,d,l,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),l={longitude:null===O||void 0===O||null===(i=O.raw)||void 0===i?void 0:i.lon,latitude:null===O||void 0===O||null===(r=O.raw)||void 0===r?void 0:r.lat,location:null===O||void 0===O||null===(s=O.raw)||void 0===s||null===(d=s.display_name)||void 0===d?void 0:d.split(",")[0],city:null===O||void 0===O?void 0:O.city,state:null===O||void 0===O?void 0:O.state,country:null===O||void 0===O?void 0:O.country},u=(0,o.Z)((0,o.Z)({host:null===t||void 0===t?void 0:t.name,participants:[null===t||void 0===t?void 0:t._id]},k),l),m({type:"SET_LOADING",loading:!0}),e.next=6,p.V.post("/events/add-event",u).then((function(e){var n;m({type:"SET_RESPONSE_DATA",responseData:{message:null===(n=e.data)||void 0===n?void 0:n.message,type:"success"}}),R("/")})).catch((function(e){var n,t;m({type:"SET_RESPONSE_DATA",responseData:{message:null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message,type:"error"}})}));case 6:m({type:"SET_LOADING",loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.target.value,S(t),e.prev=2,e.next=5,null===F||void 0===F?void 0:F.search({query:t});case 5:i=e.sent,C(i),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,i,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"SET_LOADING",loading:!0}),r=null===n||void 0===n||null===(t=n.raw)||void 0===t?void 0:t.lat,o=null===n||void 0===n||null===(i=n.raw)||void 0===i?void 0:i.lon,e.next=5,N.Z.get("https://us1.locationiq.com/v1/reverse?key=".concat(B,"&lat=").concat(r,"&lon=").concat(o,"&format=json")).then((function(e){var t;n.city=e.data.address.city,n.state=e.data.address.state,n.country=e.data.address.country,C([]),I(n),S(null===n||void 0===n||null===(t=n.raw)||void 0===t?void 0:t.display_name),M([r,o])})).catch((function(e){m({type:"SET_RESPONSE_DATA",responseData:{message:"Something went wrong with the selected location",type:"error"}})}));case 5:m({type:"SET_LOADING",loading:!1});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"add-event-form",children:(0,x.jsxs)("div",{className:"add-event-form-container",children:[(0,x.jsx)("div",{className:"add-event-back",children:(0,x.jsxs)("button",{onClick:function(){return z(-1)},children:[(0,x.jsx)(d.Z,{})," Back"]})}),(0,x.jsxs)("div",{className:"add-event-form-main-container",children:[(0,x.jsx)("div",{className:"add-event-form-left",children:(0,x.jsxs)("form",{onSubmit:function(e){J(e)},className:"add-event-input-form",children:[(0,x.jsxs)("div",{className:"add-event-form-fields",children:[(0,x.jsx)("h3",{className:"add-event-form-heading",children:"Add Event Details"}),(0,x.jsx)(l.Z,{label:"Host Name",value:null===t||void 0===t?void 0:t.name,variant:"filled",className:"add-event-input-field",InputProps:{readOnly:!0},id:"host",onChange:function(e){return H(e)}}),(0,x.jsxs)("div",{className:"add-event-location-inp-container",children:[(0,x.jsx)(l.Z,{label:"Location",type:"text",variant:"standard",className:"add-event-input-field",placeholder:"Select from map",id:"location_name",value:j,onChange:function(e){Q(e)},autoComplete:"off",required:!0}),(!O||0!==(null===A||void 0===A?void 0:A.length))&&(0,x.jsx)("div",{className:"add-event-location-results-container",children:null===A||void 0===A?void 0:A.map((function(e,n){var t;return(0,x.jsx)("p",{className:"aelr-search-card",onClick:function(){return V(e)},children:null===e||void 0===e||null===(t=e.raw)||void 0===t?void 0:t.display_name},n)}))})]}),(0,x.jsx)(l.Z,{className:"add-event-input-field",variant:"standard",label:"Type Of Sport",id:"type",onChange:function(e){return H(e)},required:!0}),(0,x.jsx)(l.Z,{className:"add-event-input-field",variant:"standard",label:"Description",id:"description",onChange:function(e){return H(e)},multiline:!0,required:!0}),(0,x.jsx)(l.Z,{id:"date",label:"Date",type:"date",variant:"standard",className:"add-event-input-field",onChange:function(e){return H(e)},InputLabelProps:{shrink:!0},required:!0}),(0,x.jsx)(l.Z,{label:"Maximum Players",type:"number",InputProps:{inputProps:{min:2}},variant:"standard",className:"add-event-input-field",id:"max_players",onChange:function(e){return H(e)},required:!0}),(0,x.jsx)(l.Z,{label:"Minimum Age (optional)",type:"number",InputProps:{inputProps:{min:1}},variant:"standard",className:"add-event-input-field",id:"min_age",onChange:function(e){return H(e)}})]}),(0,x.jsx)(u.Z,{type:"submit",variant:"contained",className:"add-event-form-btn",children:"Add Event"})]})}),(0,x.jsx)("div",{className:"add-event-form-right",children:(0,x.jsx)(g,{markerLocation:G})})]})]})})}}}]);
//# sourceMappingURL=477.f20e45a0.chunk.js.map